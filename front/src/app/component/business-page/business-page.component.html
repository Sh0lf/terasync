<div class="column-container">
  <div class="business-img-container">
    <!-- add white gradient, and add this afterwards ngSrc="{{business!.pfpImgPath}}"-->
    <div class="business-logo-container">
      <img
        class="logo-picture"
        src="https://www.lephillys.fr/wp-content/uploads/2020/11/uber-eats-logo.png"
        alt="order service logo"
      />
    </div>
  </div>
  <div (onResize)="handleFooterTopMinValue($event, 80)" class="main-page-body-div">
    <div class="row-container">
      <div class="column-business-details">
        <h5><b><u>{{business?.getName()}}</u></b></h5>
        <div>{{business?.address}}</div>
        <div>{{ratingAverage}}* ({{ratingNbr}} reviews) • Delivery fees: 2,90€</div>
      </div>
      <div class="column-business-menu">
        <ng-container *ngIf="currentUserService.user">
          <ng-container class="previous-orders" *ngIf="previousProducts.length>0">
            <h5><u><b>Previous Orders:</b></u></h5>
            <div class="row-container-orders">
              <div class="previous-product" *ngFor="let product of previousProducts">
                <app-business-list-product
                  [style.height.%]="100"
                  [product]="product"
                  (addToBasketEmitter)="addToBasket($event)">
                </app-business-list-product>
              </div>
            </div>
          </ng-container>
        </ng-container>
        <div class="menu">
          <h5><u><b>Menu:</b></u></h5>
          <div class="product" *ngFor="let product of allProducts">
            <app-business-list-product
              [style.height.%]="100"
              [product]="product"
              (addToBasketEmitter)="addToBasket($event)">
            </app-business-list-product>
          </div>
        </div>
      </div>
      <div class="column" *ngIf="this.currentUserService.user">
        <div class="column-basket">
          <h5><u><b>Basket:</b></u></h5>
          <div *ngIf="basket.size > 0">
            <div *ngFor="let entry of basket | keyvalue">
              <app-business-basket
                [style.height.%]="100"
                [products]="allProducts"
                [productId]="entry.key"
                [quantity]="entry.value"
                [isBasket]="true"
                (removeFromBasketEmitter)="removeFromBasket($event)">
              </app-business-basket>
            </div>
            <div class="basket-total">Total: {{ getTotalPrice().toFixed(2) }}€</div>
          </div>
          <div *ngIf="basket.size == 0">
            Your basket is empty.
          </div>
        </div>
        <div *ngIf="basket.size>0">
          <span><button class="confirm-button" (click)="openConfirmOrder()"><i>Finish order</i></button></span>
        </div>
      </div>
    </div>
    <div class="reviews-container">
      <h5><u><b>Reviews from previous orders</b></u></h5>
      <div class="row-container-reviews">
        <div class="review" *ngFor="let review of business?.ratingLists">
          <app-business-page-reviews
            [review]="review"
            [style.height.%]="100"
          ></app-business-page-reviews>
        </div>
      </div>
    </div>
  </div>
</div>
<app-business-page-order-confirmation
  [isModalOpen]="confirmOrderModal"
  [basket]="basket"
  [allProducts]="allProducts"
  (onClickCancelEmitter)="closeConfirmOrder($event)">
</app-business-page-order-confirmation>
